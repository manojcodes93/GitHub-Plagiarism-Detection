{% extends "base.html" %}
{% block content %}

<h2>Repository Similarity Matrix</h2>

<table>
<tr>
    <th>Repo</th>
    {% for name in data.matrix_names %}
        <th>{{ name }}</th>
    {% endfor %}
</tr>

{% for row in data.similarity_matrix %}
<tr>
    <th>{{ data.matrix_names[loop.index0] }}</th>
    {% for s in row %}
        <td>
            {% if s is number %}
                {{ "%.2f"|format(s) }}
            {% else %}
                —
            {% endif %}
        </td>
    {% endfor %}
</tr>
{% endfor %}
</table>

<hr>

<h2>Per‑File Similarity Matches</h2>

<table>
<tr>
    <th>Repository A</th>
    <th>Repository B</th>
    <th>File Index A</th>
    <th>File Index B</th>
    <th>Similarity</th>
</tr>

{% for ra, rb, fa, fb, score in data.file_similarity_pairs %}
<tr>
    <td>{{ ra }}</td>
    <td>{{ rb }}</td>
    <td>{{ fa }}</td>
    <td>{{ fb }}</td>
    <td>{{ "%.2f"|format(score) }}</td>
</tr>
{% endfor %}
</table>

<hr>

<h2>Commit Message Similarity</h2>

<table>
<tr>
    <th>Commit A</th>
    <th>Commit B</th>
    <th>Similarity</th>
</tr>

{% for item in data.suspicious_commits %}
<tr>
    <td>{{ item.commit_1 }}</td>
    <td>{{ item.commit_2 }}</td>
    <td>{{ "%.2f"|format(item.similarity) }}</td>
</tr>
{% endfor %}
</table>

<hr>

<h2>Side‑by‑Side Code Comparison</h2>

<a href="{{ url_for('main.compare_view') }}">
    Open Code Compare Page
</a>

<hr>

<h2>Download Reports</h2>

<a href="{{ url_for('main.download_report', type='csv') }}">
    Download CSV
</a><br>

<a href="{{ url_for('main.download_report', type='pdf') }}">
    Download PDF
</a>

{% endblock %}
