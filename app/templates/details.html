{% extends "base.html" %}
{% block content %}

<h2>Repository Similarity Matrix</h2>

<table>
    <tr>
        <th>Repo</th>
        {% for name in data.matrix_names %}
            <th>{{ name }}</th>
        {% endfor %}
    </tr>

    {% for row in data.similarity_matrix %}
    <tr>
        <th>{{ data.matrix_names[loop.index0] }}</th>
        {% for s in row %}
            <td>
                {% if s is number %}
                    {{ "%.2f"|format(s) }}
                {% else %}
                    {{ s }}
                {% endif %}
            </td>
        {% endfor %}
    </tr>
    {% endfor %}
</table>

<hr>

<h2>Commit Message Similarity Detection</h2>

<table>
<tr>
    <th>Commit Message A</th>
    <th>Commit Message B</th>
    <th>Similarity</th>
</tr>

{% for item in data.commit_similarities %}
<tr>
    <td>{{ item.a }}</td>
    <td>{{ item.b }}</td>
    <td>{{ "%.2f"|format(item.score) }}</td>
</tr>
{% endfor %}
</table>

<hr>

<h2>Side‑by‑Side Code Proof</h2>

<div class="code-compare">
<pre>{{ data.code_a }}</pre>
<pre>{{ data.code_b }}</pre>
</div>

<hr>

<h2>Download Report</h2>
<a href="/download/csv">Download CSV</a>
<a href="/download/pdf">Download PDF</a>

{% endblock %}
